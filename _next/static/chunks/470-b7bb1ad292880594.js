"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{2173:function(e,t,n){var r=n(4232);let o=b();const i=e=>g(e,o);let a=b();i.write=e=>g(e,a);let s=b();i.onStart=e=>g(e,s);let l=b();i.onFrame=e=>g(e,l);let c=b();i.onFinish=e=>g(e,c);let u=[];i.setTimeout=(e,t)=>{let n=i.now()+t,r=()=>{let e=u.findIndex((e=>e.cancel==r));~e&&u.splice(e,1),d-=~e?1:0},o={time:n,handler:e,cancel:r};return u.splice(h(n),0,o),d+=1,v(),o};let h=e=>~(~u.findIndex((t=>t.time>e))||~u.length);i.cancel=e=>{s.delete(e),l.delete(e),o.delete(e),a.delete(e),c.delete(e)},i.sync=e=>{m=!0,i.batchedUpdates(e),m=!1},i.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...e){t=e,i.onStart(n)}return r.handler=e,r.cancel=()=>{s.delete(n),t=null},r};let f="undefined"!=typeof window?window.requestAnimationFrame:()=>{};i.use=e=>f=e,i.now="undefined"!=typeof performance?()=>performance.now():Date.now,i.batchedUpdates=e=>e(),i.catch=console.error,i.frameLoop="always",i.advance=()=>{"demand"!==i.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):w()};let p=-1,d=0,m=!1;function g(e,t){m?(t.delete(e),e(0)):(t.add(e),v())}function v(){p<0&&(p=0,"demand"!==i.frameLoop&&f(y))}function y(){~p&&(f(y),i.batchedUpdates(w))}function w(){let e=p;p=i.now();let t=h(p);t&&(x(u.splice(0,t),(e=>e.handler())),d-=t),s.flush(),o.flush(e?Math.min(64,p-e):16.667),l.flush(),a.flush(),c.flush(),d||(p=-1)}function b(){let e=new Set,t=e;return{add(n){d+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(d-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,d-=t.size,x(t,(t=>t(n)&&e.add(t))),d+=e.size,t=e)}}}function x(e,t){e.forEach((e=>{try{t(e)}catch(n){i.catch(n)}}))}var I=n(7294);const M={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,und:e=>void 0===e};const A=(e,t)=>e.forEach(t);function k(e,t,n){if(M.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}const E=e=>M.und(e)?[]:M.arr(e)?e:[e];const T=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let P,C,F=null,S=!1,O=function(){};var L=Object.freeze({__proto__:null,get createStringInterpolator(){return P},get to(){return C},get colors(){return F},get skipAnimation(){return S},get willAdvance(){return O},assign:e=>{e.to&&(C=e.to),e.now&&(i.now=e.now),void 0!==e.colors&&(F=e.colors),null!=e.skipAnimation&&(S=e.skipAnimation),e.createStringInterpolator&&(P=e.createStringInterpolator),e.requestAnimationFrame&&i.use(e.requestAnimationFrame),e.batchedUpdates&&(i.batchedUpdates=e.batchedUpdates),e.willAdvance&&(O=e.willAdvance),e.frameLoop&&(i.frameLoop=e.frameLoop)}});const D=new Set;let R=[],N=[],V=0;const j={get idle(){return!D.size&&!R.length},start(e){V>e.priority?(D.add(e),i.onStart(z)):(B(e),i(_))},advance:_,sort(e){if(V)i.onFrame((()=>j.sort(e)));else{const t=R.indexOf(e);~t&&(R.splice(t,1),U(e))}},clear(){R=[],D.clear()}};function z(){D.forEach(B),D.clear(),i(_)}function B(e){R.includes(e)||U(e)}function U(e){R.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(R,(t=>t.priority>e.priority)),0,e)}function _(e){const t=N;for(let n=0;n<R.length;n++){const r=R[n];V=r.priority,r.idle||(O(r),r.advance(e),r.idle||t.push(r))}return V=0,N=R,N.length=0,R=t,R.length>0}const G="[-+]?\\d*\\.?\\d+",$=G+"%";function X(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const W=new RegExp("rgb"+X(G,G,G)),H=new RegExp("rgba"+X(G,G,G,G)),q=new RegExp("hsl"+X(G,$,$)),Z=new RegExp("hsla"+X(G,$,$,G)),K=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Q=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Y=/^#([0-9a-fA-F]{6})$/,J=/^#([0-9a-fA-F]{8})$/;function ee(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function te(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,i=ee(o,r,e+1/3),a=ee(o,r,e),s=ee(o,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function ne(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function re(e){return(parseFloat(e)%360+360)%360/360}function oe(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function ie(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function ae(e){let t=function(e){let t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Y.exec(e))?parseInt(t[1]+"ff",16)>>>0:F&&void 0!==F[e]?F[e]:(t=W.exec(e))?(ne(t[1])<<24|ne(t[2])<<16|ne(t[3])<<8|255)>>>0:(t=H.exec(e))?(ne(t[1])<<24|ne(t[2])<<16|ne(t[3])<<8|oe(t[4]))>>>0:(t=K.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=J.exec(e))?parseInt(t[1],16)>>>0:(t=Q.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=q.exec(e))?(255|te(re(t[1]),ie(t[2]),ie(t[3])))>>>0:(t=Z.exec(e))?(te(re(t[1]),ie(t[2]),ie(t[3]))|oe(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const se=(e,t,n)=>{if(M.fun(e))return e;if(M.arr(e))return se({range:e,output:t,extrapolate:n});if(M.str(e.output[0]))return P(e);const r=e,o=r.output,i=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,o,i,a,s,l){let c=l?l(e):e;if(c<t){if("identity"===a)return c;"clamp"===a&&(c=t)}if(c>n){if("identity"===s)return c;"clamp"===s&&(c=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=i(c),r===-1/0?c=-c:o===1/0?c+=r:c=c*(o-r)+r;return c}(e,i[t],i[t+1],o[t],o[t+1],l,a,s,r.map)}};function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const ce=Symbol.for("FluidValue.get"),ue=Symbol.for("FluidValue.observers"),he=e=>Boolean(e&&e[ce]),fe=e=>e&&e[ce]?e[ce]():e;function pe(e,t){let n=e[ue];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}const de=(e,t)=>me(e,ce,t);const me=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),ge=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ve=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ye=new RegExp(`(${ge.source})(%|[a-z]+)`,"i"),we=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,be=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,xe=e=>{const[t,n]=Ie(e);if(!t||T())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&be.test(n)?xe(n):n||e},Ie=e=>{const t=be.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]};let Me;const Ae=(e,t,n,r,o)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,ke="react-spring: ",Ee=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${ke}once requires a function parameter`);return(...e)=>{n||(t(...e),n=!0)}},Te=Ee(console.warn);Ee(console.warn);function Pe(e){return M.str(e)&&("#"==e[0]||/\d/.test(e)||!T()&&be.test(e)||e in(F||{}))}"undefined"!==typeof window&&window.document&&window.document.createElement?I.useLayoutEffect:I.useEffect;const Ce=Symbol.for("Animated:node"),Fe=e=>e&&e[Ce],Se=(e,t)=>{return n=e,r=Ce,o=t,Object.defineProperty(n,r,{value:o,writable:!0,configurable:!0});var n,r,o},Oe=e=>e&&e[Ce]&&e[Ce].getPayload();class Le{constructor(){this.payload=void 0,Se(this,this)}getPayload(){return this.payload||[]}}class De extends Le{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,M.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new De(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return M.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,M.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class Re extends De{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=se({output:[e,e]})}static create(e){return new Re(e)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(M.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=se({output:[this.getValue(),e]})),this._value=0,super.reset()}}const Ne={dependencies:null};class Ve extends Le{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return k(this.source,((n,r)=>{var o;(o=n)&&o[Ce]===o?t[r]=n.getValue(e):he(n)?t[r]=fe(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&A(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return k(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Ne.dependencies&&he(e)&&Ne.dependencies.add(e);const t=Oe(e);t&&A(t,(e=>this.add(e)))}}class je extends Ve{constructor(e){super(e)}static create(e){return new je(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(ze)),!0)}}function ze(e){return(Pe(e)?Re:De).create(e)}Symbol.for("AnimatedComponent");function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Ue=1.70158,_e=1.525*Ue,Ge=Ue+1,$e=2*Math.PI/3,Xe=2*Math.PI/4.5,We=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375};Be({},{tension:170,friction:26},{mass:1,damping:1,easing:{linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>Ge*e*e*e-Ue*e*e,easeOutBack:e=>1+Ge*Math.pow(e-1,3)+Ue*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-_e)/2:(Math.pow(2*e-2,2)*((_e+1)*(2*e-2)+_e)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*$e),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*$e)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Xe)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Xe)/2+1,easeInBounce:e=>1-We(1-e),easeOutBounce:We,easeInOutBounce:e=>e<.5?(1-We(1-2*e))/2:(1+We(2*e-1))/2}.linear,clamp:!1});Error;Error;const He=e=>e instanceof Ze;let qe=1;class Ze extends class{constructor(e){if(this[ce]=void 0,this[ue]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");de(this,e)}}{constructor(...e){super(...e),this.id=qe++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Fe(this);return e&&e.getValue()}to(...e){return L.to(this,e)}interpolate(...e){return Te(`${ke}The "interpolate" function is deprecated in v9 (use "to" instead)`),L.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){pe(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||j.sort(this),pe(this,{type:"priority",parent:this,priority:e})}}Symbol.for("SpringPhase");function Ke(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}const Qe=["children"],Ye=e=>{let{children:t}=e,n=Ke(e,Qe);const r=(0,I.useContext)(Je),o=n.pause||!!r.pause,i=n.immediate||!!r.immediate;n=function(e,t){const[n]=(0,I.useState)((()=>({inputs:t,result:e()}))),r=(0,I.useRef)(),o=r.current;let i=o;i?Boolean(t&&i.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,i.inputs))||(i={inputs:t,result:e()}):i=n;return(0,I.useEffect)((()=>{r.current=i,o==n&&(n.inputs=n.result=void 0)}),[i]),i.result}((()=>({pause:o,immediate:i})),[o,i]);const{Provider:a}=Je;return I.createElement(a,{value:n},t)},Je=(et=Ye,tt={},Object.assign(et,I.createContext(tt)),et.Provider._context=et,et.Consumer._context=et,et);var et,tt;Ye.Provider=Je.Provider,Ye.Consumer=Je.Consumer;let nt;!function(e){e.MOUNT="mount",e.ENTER="enter",e.UPDATE="update",e.LEAVE="leave"}(nt||(nt={}));class rt extends Ze{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=se(...t);const n=this._get(),r=function(e){const t=Fe(e);return t?t.constructor:M.arr(e)?je:Pe(e)?Re:De}(n);Se(this,r.create(n))}advance(e){const t=this._get();(function(e,t){if(M.arr(e)){if(!M.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t})(t,this.get())||(Fe(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&it(this._active)&&at(this)}_get(){const e=M.arr(this.source)?this.source.map(fe):E(fe(this.source));return this.calc(...e)}_start(){this.idle&&!it(this._active)&&(this.idle=!1,A(Oe(this),(e=>{e.done=!1})),L.skipAnimation?(i.batchedUpdates((()=>this.advance())),at(this)):j.start(this))}_attach(){let e=1;A(E(this.source),(t=>{he(t)&&function(e,t){if(e[ce]){let n=e[ue];n||me(e,ue,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}}(t,this),He(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){A(E(this.source),(e=>{he(e)&&function(e,t){let n=e[ue];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[ue]=null,e.observerRemoved&&e.observerRemoved(r,t)}}(e,this)})),this._active.clear(),at(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=E(this.source).reduce(((e,t)=>Math.max(e,(He(t)?t.priority:0)+1)),0))}}function ot(e){return!1!==e.idle}function it(e){return!e.size||Array.from(e).every(ot)}function at(e){e.idle||(e.idle=!0,A(Oe(e),(e=>{e.done=!0})),pe(e,{type:"idle",parent:e}))}L.assign({createStringInterpolator:e=>{Me||(Me=F?new RegExp(`(${Object.keys(F).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>fe(e).replace(be,xe).replace(ve,ae).replace(Me,ae))),n=t.map((e=>e.match(ge).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))).map((t=>se(le({},e,{output:t}))));return e=>{var n;const o=!ye.test(t[0])&&(null==(n=t.find((e=>ye.test(e))))?void 0:n.replace(ge,""));let i=0;return t[0].replace(ge,(()=>`${r[i++](e)}${o||""}`)).replace(we,Ae)}},to:(e,t)=>new rt(e,t)});j.advance;const st={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,und:e=>void 0===e};const lt=(e,t)=>e.forEach(t);function ct(e,t,n){if(st.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}const ut=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let ht,ft=null;new Set;const pt="[-+]?\\d*\\.?\\d+",dt="[-+]?\\d*\\.?\\d+%";function mt(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}const gt=new RegExp("rgb"+mt(pt,pt,pt)),vt=new RegExp("rgba"+mt(pt,pt,pt,pt)),yt=new RegExp("hsl"+mt(pt,dt,dt)),wt=new RegExp("hsla"+mt(pt,dt,dt,pt)),bt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,xt=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,It=/^#([0-9a-fA-F]{6})$/,Mt=/^#([0-9a-fA-F]{8})$/;function At(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function kt(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,o=2*n-r,i=At(o,r,e+1/3),a=At(o,r,e),s=At(o,r,e-1/3);return Math.round(255*i)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function Et(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Tt(e){return(parseFloat(e)%360+360)%360/360}function Pt(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function Ct(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Ft(e){let t=function(e){let t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=It.exec(e))?parseInt(t[1]+"ff",16)>>>0:ft&&void 0!==ft[e]?ft[e]:(t=gt.exec(e))?(Et(t[1])<<24|Et(t[2])<<16|Et(t[3])<<8|255)>>>0:(t=vt.exec(e))?(Et(t[1])<<24|Et(t[2])<<16|Et(t[3])<<8|Pt(t[4]))>>>0:(t=bt.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Mt.exec(e))?parseInt(t[1],16)>>>0:(t=xt.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=yt.exec(e))?(255|kt(Tt(t[1]),Ct(t[2]),Ct(t[3])))>>>0:(t=wt.exec(e))?(kt(Tt(t[1]),Ct(t[2]),Ct(t[3]))|Pt(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const St=(e,t,n)=>{if(st.fun(e))return e;if(st.arr(e))return St({range:e,output:t,extrapolate:n});if(st.str(e.output[0]))return ht(e);const r=e,o=r.output,i=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,i);return function(e,t,n,r,o,i,a,s,l){let c=l?l(e):e;if(c<t){if("identity"===a)return c;"clamp"===a&&(c=t)}if(c>n){if("identity"===s)return c;"clamp"===s&&(c=n)}if(r===o)return r;if(t===n)return e<=t?r:o;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=i(c),r===-1/0?c=-c:o===1/0?c+=r:c=c*(o-r)+r;return c}(e,i[t],i[t+1],o[t],o[t+1],l,a,s,r.map)}};function Ot(){return(Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Lt=Symbol.for("FluidValue.get"),Dt=Symbol.for("FluidValue.observers"),Rt=e=>Boolean(e&&e[Lt]),Nt=e=>e&&e[Lt]?e[Lt]():e;function Vt(e,t){let n=e[Dt];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[Dt]=null,e.observerRemoved&&e.observerRemoved(r,t)}}const jt=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),zt=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Bt=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Ut=new RegExp(`(${zt.source})(%|[a-z]+)`,"i"),_t=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Gt=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,$t=e=>{const[t,n]=Xt(e);if(!t||ut())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&Gt.test(n)?$t(n):n||e},Xt=e=>{const t=Gt.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]};let Wt;const Ht=(e,t,n,r,o)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${o})`,qt=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError("react-spring: once requires a function parameter");return(...e)=>{n||(t(...e),n=!0)}};qt(console.warn);qt(console.warn);const Zt=e=>(0,I.useEffect)(e,Kt),Kt=[];function Qt(){const e={current:!0,unmount:()=>()=>{e.current=!1}};return e}const Yt="undefined"!==typeof window&&window.document&&window.document.createElement?I.useLayoutEffect:I.useEffect,Jt=Symbol.for("Animated:node"),en=(e,t)=>{return n=e,r=Jt,o=t,Object.defineProperty(n,r,{value:o,writable:!0,configurable:!0});var n,r,o};class tn{constructor(){this.payload=void 0,en(this,this)}getPayload(){return this.payload||[]}}const nn={dependencies:null};class rn extends tn{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return ct(this.source,((n,r)=>{var o;(o=n)&&o[Jt]===o?t[r]=n.getValue(e):Rt(n)?t[r]=Nt(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&lt(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return ct(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){nn.dependencies&&Rt(e)&&nn.dependencies.add(e);const t=(n=e)&&n[Jt]&&n[Jt].getPayload();var n;t&&lt(t,(e=>this.add(e)))}}function on(){return(on=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const an=(e,t)=>{const n=!st.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,I.forwardRef)(((r,o)=>{const a=(0,I.useRef)(null),s=n&&(0,I.useCallback)((e=>{a.current=function(e,t){e&&(st.fun(e)?e(t):e.current=t);return t}(o,e)}),[o]),[l,c]=function(e,t){const n=new Set;nn.dependencies=n,e.style&&(e=on({},e,{style:t.createAnimatedStyle(e.style)}));return e=new rn(e),nn.dependencies=null,[e,n]}(r,t),u=function(){const e=(0,I.useState)()[1],t=(0,I.useState)(Qt)[0];return Zt(t.unmount),()=>{t.current&&e({})}}(),h=()=>{const e=a.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,l.getValue(!0)))&&u()},f=new sn(h,c),p=(0,I.useRef)();Yt((()=>{const e=p.current;p.current=f,lt(c,(e=>function(e,t){if(e[Lt]){let n=e[Dt];n||jt(e,Dt,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}(e,f))),e&&(lt(e.deps,(t=>Vt(t,e))),i.cancel(e.update))})),(0,I.useEffect)(h,[]),Zt((()=>()=>{const e=p.current;lt(e.deps,(t=>Vt(t,e)))}));const d=t.getComponentProps(l.getValue());return I.createElement(e,on({},d,{ref:s}))}))};class sn{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&i.write(this.update)}}const ln=Symbol.for("AnimatedComponent"),cn=e=>st.str(e)?e:e&&st.str(e.displayName)?e.displayName:st.fun(e)&&e.name||null;var un=n(2212);const hn=["primitive"].concat(Object.keys(un).filter((e=>/^[A-Z]/.test(e))).map((e=>e[0].toLowerCase()+e.slice(1))));L.assign({createStringInterpolator:e=>{Wt||(Wt=ft?new RegExp(`(${Object.keys(ft).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>Nt(e).replace(Gt,$t).replace(Bt,Ft).replace(Wt,Ft))),n=t.map((e=>e.match(zt).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))).map((t=>St(Ot({},e,{output:t}))));return e=>{var n;const o=!Ut.test(t[0])&&(null==(n=t.find((e=>Ut.test(e))))?void 0:n.replace(zt,""));let i=0;return t[0].replace(zt,(()=>`${r[i++](e)}${o||""}`)).replace(_t,Ht)}},colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},frameLoop:"demand"}),(0,r.gy)((()=>{i.advance()}));((e,{applyAnimatedValues:t=(()=>!1),createAnimatedStyle:n=(e=>new rn(e)),getComponentProps:r=(e=>e)}={})=>{const o={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=e=>{const t=cn(e)||"Anonymous";return(e=st.str(e)?i[e]||(i[e]=an(e,o)):e[ln]||(e[ln]=an(e,o))).displayName=`Animated(${t})`,e};return ct(e,((t,n)=>{st.arr(e)&&(n=cn(t)),i[n]=i(t)})),{animated:i}})(hn,{applyAnimatedValues:r.nH}).animated},1411:function(e,t,n){n.d(t,{y:function(){return Dt}});var r={};n.r(r),n.d(r,{AsyncCompress:function(){return Le},AsyncDecompress:function(){return Ze},AsyncDeflate:function(){return ke},AsyncGunzip:function(){return Ve},AsyncGzip:function(){return Le},AsyncInflate:function(){return Ce},AsyncUnzipInflate:function(){return It},AsyncUnzlib:function(){return Xe},AsyncZipDeflate:function(){return gt},AsyncZlib:function(){return Ue},Compress:function(){return Oe},DecodeUTF8:function(){return rt},Decompress:function(){return qe},Deflate:function(){return Ae},EncodeUTF8:function(){return ot},Gunzip:function(){return Ne},Gzip:function(){return Oe},Inflate:function(){return Pe},Unzip:function(){return Mt},UnzipInflate:function(){return xt},UnzipPassThrough:function(){return bt},Unzlib:function(){return $e},Zip:function(){return vt},ZipDeflate:function(){return mt},ZipPassThrough:function(){return dt},Zlib:function(){return Be},compress:function(){return De},compressSync:function(){return Re},decompress:function(){return Ke},decompressSync:function(){return Qe},deflate:function(){return Ee},deflateSync:function(){return Te},gunzip:function(){return je},gunzipSync:function(){return ze},gzip:function(){return De},gzipSync:function(){return Re},inflate:function(){return Fe},inflateSync:function(){return Se},strFromU8:function(){return at},strToU8:function(){return it},unzip:function(){return At},unzipSync:function(){return kt},unzlib:function(){return We},unzlibSync:function(){return He},zip:function(){return yt},zipSync:function(){return wt},zlib:function(){return _e},zlibSync:function(){return Ge}});var o=n(2212),i={},a=function(e){return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},s=function(e){return new Worker(e)};try{URL.revokeObjectURL(a(""))}catch(Jt){a=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)},s=function(e){return new Worker(e,{type:"module"})}}var l=Uint8Array,c=Uint16Array,u=Uint32Array,h=new l([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f=new l([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),p=new l([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=function(e,t){for(var n=new c(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new u(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return[n,o]},m=d(h,2),g=m[0],v=m[1];g[28]=258,v[258]=28;for(var y=d(f,0),w=y[0],b=y[1],x=new c(32768),I=0;I<32768;++I){var M=(43690&I)>>>1|(21845&I)<<1;M=(61680&(M=(52428&M)>>>2|(13107&M)<<2))>>>4|(3855&M)<<4,x[I]=((65280&M)>>>8|(255&M)<<8)>>>1}var A=function(e,t,n){for(var r=e.length,o=0,i=new c(t);o<r;++o)++i[e[o]-1];var a,s=new c(t);for(o=0;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;if(n){a=new c(1<<t);var l=15-t;for(o=0;o<r;++o)if(e[o])for(var u=o<<4|e[o],h=t-e[o],f=s[e[o]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)a[x[f]>>>l]=u}else for(a=new c(r),o=0;o<r;++o)e[o]&&(a[o]=x[s[e[o]-1]++]>>>15-e[o]);return a},k=new l(288);for(I=0;I<144;++I)k[I]=8;for(I=144;I<256;++I)k[I]=9;for(I=256;I<280;++I)k[I]=7;for(I=280;I<288;++I)k[I]=8;var E=new l(32);for(I=0;I<32;++I)E[I]=5;var T=A(k,9,0),P=A(k,9,1),C=A(E,5,0),F=A(E,5,1),S=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},O=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},L=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},D=function(e){return(e/8|0)+(7&e&&1)},R=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof c?c:e instanceof u?u:l)(n-t);return r.set(e.subarray(t,n)),r},N=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new l(0);var o=!t||n,i=!n||n.i;n||(n={}),t||(t=new l(3*r));var a=function(e){var n=t.length;if(e>n){var r=new l(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,c=n.p||0,u=n.b||0,d=n.l,m=n.d,v=n.m,y=n.n,b=8*r;do{if(!d){n.f=s=O(e,c,1);var x=O(e,c+1,3);if(c+=3,!x){var I=e[(U=D(c)+4)-4]|e[U-3]<<8,M=U+I;if(M>r){if(i)throw"unexpected EOF";break}o&&a(u+I),t.set(e.subarray(U,M),u),n.b=u+=I,n.p=c=8*M;continue}if(1==x)d=P,m=F,v=9,y=5;else{if(2!=x)throw"invalid block type";var k=O(e,c,31)+257,E=O(e,c+10,15)+4,T=k+O(e,c+5,31)+1;c+=14;for(var C=new l(T),N=new l(19),V=0;V<E;++V)N[p[V]]=O(e,c+3*V,7);c+=3*E;var j=S(N),z=(1<<j)-1,B=A(N,j,1);for(V=0;V<T;){var U,_=B[O(e,c,z)];if(c+=15&_,(U=_>>>4)<16)C[V++]=U;else{var G=0,$=0;for(16==U?($=3+O(e,c,3),c+=2,G=C[V-1]):17==U?($=3+O(e,c,7),c+=3):18==U&&($=11+O(e,c,127),c+=7);$--;)C[V++]=G}}var X=C.subarray(0,k),W=C.subarray(k);v=S(X),y=S(W),d=A(X,v,1),m=A(W,y,1)}if(c>b){if(i)throw"unexpected EOF";break}}o&&a(u+131072);for(var H=(1<<v)-1,q=(1<<y)-1,Z=c;;Z=c){var K=(G=d[L(e,c)&H])>>>4;if((c+=15&G)>b){if(i)throw"unexpected EOF";break}if(!G)throw"invalid length/literal";if(K<256)t[u++]=K;else{if(256==K){Z=c,d=null;break}var Q=K-254;if(K>264){var Y=h[V=K-257];Q=O(e,c,(1<<Y)-1)+g[V],c+=Y}var J=m[L(e,c)&q],ee=J>>>4;if(!J)throw"invalid distance";c+=15&J;W=w[ee];if(ee>3){Y=f[ee];W+=L(e,c)&(1<<Y)-1,c+=Y}if(c>b){if(i)throw"unexpected EOF";break}o&&a(u+131072);for(var te=u+Q;u<te;u+=4)t[u]=t[u-W],t[u+1]=t[u+1-W],t[u+2]=t[u+2-W],t[u+3]=t[u+3-W];u=te}}n.l=d,n.p=Z,n.b=u,d&&(s=1,n.m=v,n.d=m,n.n=y)}while(!s);return u==t.length?t:R(t,0,u)},V=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},j=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},z=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,i=n.slice();if(!o)return[W,0];if(1==o){var a=new l(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],u=n[1],h=0,f=1,p=2;for(n[0]={s:-1,f:s.f+u.f,l:s,r:u};f!=o-1;)s=n[n[h].f<n[p].f?h++:p++],u=n[h!=f&&n[h].f<n[p].f?h++:p++],n[f++]={s:-1,f:s.f+u.f,l:s,r:u};var d=i[0].s;for(r=1;r<o;++r)i[r].s>d&&(d=i[r].s);var m=new c(d+1),g=B(n[f-1],m,0);if(g>t){r=0;var v=0,y=g-t,w=1<<y;for(i.sort((function(e,t){return m[t.s]-m[e.s]||e.f-t.f}));r<o;++r){var b=i[r].s;if(!(m[b]>t))break;v+=w-(1<<g-m[b]),m[b]=t}for(v>>>=y;v>0;){var x=i[r].s;m[x]<t?v-=1<<t-m[x]++-1:++r}for(;r>=0&&v;--r){var I=i[r].s;m[I]==t&&(--m[I],++v)}g=t}return[new l(m),g]},B=function(e,t,n){return-1==e.s?Math.max(B(e.l,t,n+1),B(e.r,t,n+1)):t[e.s]=n},U=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new c(++t),r=0,o=e[0],i=1,a=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(o),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(o);i=1,o=e[s]}return[n.subarray(0,r),t]},_=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},G=function(e,t,n){var r=n.length,o=D(t+2);e[o]=255&r,e[o+1]=r>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var i=0;i<r;++i)e[o+i+4]=n[i];return 8*(o+4+r)},$=function(e,t,n,r,o,i,a,s,l,u,d){V(t,d++,n),++o[256];for(var m=z(o,15),g=m[0],v=m[1],y=z(i,15),w=y[0],b=y[1],x=U(g),I=x[0],M=x[1],P=U(w),F=P[0],S=P[1],O=new c(19),L=0;L<I.length;++L)O[31&I[L]]++;for(L=0;L<F.length;++L)O[31&F[L]]++;for(var D=z(O,7),R=D[0],N=D[1],B=19;B>4&&!R[p[B-1]];--B);var $,X,W,H,q=u+5<<3,Z=_(o,k)+_(i,E)+a,K=_(o,g)+_(i,w)+a+14+3*B+_(O,R)+(2*O[16]+3*O[17]+7*O[18]);if(q<=Z&&q<=K)return G(t,d,e.subarray(l,l+u));if(V(t,d,1+(K<Z)),d+=2,K<Z){$=A(g,v,0),X=g,W=A(w,b,0),H=w;var Q=A(R,N,0);V(t,d,M-257),V(t,d+5,S-1),V(t,d+10,B-4),d+=14;for(L=0;L<B;++L)V(t,d+3*L,R[p[L]]);d+=3*B;for(var Y=[I,F],J=0;J<2;++J){var ee=Y[J];for(L=0;L<ee.length;++L){var te=31&ee[L];V(t,d,Q[te]),d+=R[te],te>15&&(V(t,d,ee[L]>>>5&127),d+=ee[L]>>>12)}}}else $=T,X=k,W=C,H=E;for(L=0;L<s;++L)if(r[L]>255){te=r[L]>>>18&31;j(t,d,$[te+257]),d+=X[te+257],te>7&&(V(t,d,r[L]>>>23&31),d+=h[te]);var ne=31&r[L];j(t,d,W[ne]),d+=H[ne],ne>3&&(j(t,d,r[L]>>>5&8191),d+=f[ne])}else j(t,d,$[r[L]]),d+=X[r[L]];return j(t,d,$[256]),d+X[256]},X=new u([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),W=new l(0),H=function(e,t,n,r,o,i){var a=e.length,s=new l(r+a+5*(1+Math.ceil(a/7e3))+o),p=s.subarray(r,s.length-o),d=0;if(!t||a<8)for(var m=0;m<=a;m+=65535){var g=m+65535;g<a?d=G(p,d,e.subarray(m,g)):(p[m]=i,d=G(p,d,e.subarray(m,a)))}else{for(var y=X[t-1],w=y>>>13,x=8191&y,I=(1<<n)-1,M=new c(32768),A=new c(I+1),k=Math.ceil(n/3),E=2*k,T=function(t){return(e[t]^e[t+1]<<k^e[t+2]<<E)&I},P=new u(25e3),C=new c(288),F=new c(32),S=0,O=0,L=(m=0,0),N=0,V=0;m<a;++m){var j=T(m),z=32767&m,B=A[j];if(M[z]=B,A[j]=z,N<=m){var U=a-m;if((S>7e3||L>24576)&&U>423){d=$(e,p,0,P,C,F,O,L,V,m-V,d),L=S=O=0,V=m;for(var _=0;_<286;++_)C[_]=0;for(_=0;_<30;++_)F[_]=0}var H=2,q=0,Z=x,K=z-B&32767;if(U>2&&j==T(m-K))for(var Q=Math.min(w,U)-1,Y=Math.min(32767,m),J=Math.min(258,U);K<=Y&&--Z&&z!=B;){if(e[m+H]==e[m+H-K]){for(var ee=0;ee<J&&e[m+ee]==e[m+ee-K];++ee);if(ee>H){if(H=ee,q=K,ee>Q)break;var te=Math.min(K,ee-2),ne=0;for(_=0;_<te;++_){var re=m-K+_+32768&32767,oe=re-M[re]+32768&32767;oe>ne&&(ne=oe,B=re)}}}K+=(z=B)-(B=M[z])+32768&32767}if(q){P[L++]=268435456|v[H]<<18|b[q];var ie=31&v[H],ae=31&b[q];O+=h[ie]+f[ae],++C[257+ie],++F[ae],N=m+H,++S}else P[L++]=e[m],++C[e[m]]}}d=$(e,p,i,P,C,F,O,L,V,m-V,d),!i&&7&d&&(d=G(p,d+1,W))}return R(s,0,r+D(d)+o)},q=function(){for(var e=new u(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e}(),Z=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=q[255&n^t[r]]^n>>>8;e=n},d:function(){return~e}}},K=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,i=n.length,a=0;a!=i;){for(var s=Math.min(a+2655,i);a<s;++a)o+=r+=n[a];r=(65535&r)+15*(r>>16),o=(65535&o)+15*(o>>16)}e=r,t=o},d:function(){return(255&(e%=65521))<<24|e>>>8<<16|(255&(t%=65521))<<8|t>>>8}}},Q=function(e,t,n,r,o){return H(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!o)},Y=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},J=function(e,t,n){for(var r=e(),o=e.toString(),i=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<r.length;++a){var s=r[a],l=i[a];if("function"==typeof s){t+=";"+l+"=";var c=s.toString();if(s.prototype)if(-1!=c.indexOf("[native code]")){var u=c.indexOf(" ",8)+1;t+=c.slice(u,c.indexOf("(",u))}else for(var h in t+=c,s.prototype)t+=";"+l+".prototype."+h+"="+s.prototype[h].toString();else t+=c}else n[l]=s}return[t,n]},ee=[],te=function(e,t,n,r){var o;if(!ee[n]){for(var h="",f={},p=e.length-1,d=0;d<p;++d)h=(o=J(e[d],h,f))[0],f=o[1];ee[n]=J(e[p],h,f)}var m=Y({},ee[n][1]);return function(e,t,n,r,o){var l=s(i[t]||(i[t]=a(e)));return l.onerror=function(e){return o(e.error,null)},l.onmessage=function(e){return o(null,e.data)},l.postMessage(n,r),l}(ee[n][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",n,m,function(e){var t=[];for(var n in e)(e[n]instanceof l||e[n]instanceof c||e[n]instanceof u)&&t.push((e[n]=new e[n].constructor(e[n])).buffer);return t}(m),r)},ne=function(){return[l,c,u,h,f,p,g,w,P,F,x,A,S,O,L,D,R,N,Se,le,ce]},re=function(){return[l,c,u,h,f,p,v,b,T,k,C,E,x,X,W,A,V,j,z,B,U,_,G,$,D,R,H,Q,Te,le]},oe=function(){return[ve,be,ge,Z,q]},ie=function(){return[ye,we]},ae=function(){return[xe,ge,K]},se=function(){return[Ie]},le=function(e){return postMessage(e,[e.buffer])},ce=function(e){return e&&e.size&&new l(e.size)},ue=function(e,t,n,r,o,i){var a=te(n,r,o,(function(e,t){a.terminate(),i(e,t)}));return a.postMessage([e,t],t.consume?[e.buffer]:[]),function(){a.terminate()}},he=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},fe=function(e,t,n,r,o){var i,a=te(e,r,o,(function(e,n){e?(a.terminate(),t.ondata.call(t,e)):(n[1]&&a.terminate(),t.ondata.call(t,e,n[0],n[1]))}));a.postMessage(n),t.push=function(e,n){if(i)throw"stream finished";if(!t.ondata)throw"no stream handler";a.postMessage([e,i=n],[e.buffer])},t.terminate=function(){a.terminate()}},pe=function(e,t){return e[t]|e[t+1]<<8},de=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},me=function(e,t){return de(e,t)+4294967296*de(e,t+4)},ge=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},ve=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&ge(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},ye=function(e){if(31!=e[0]||139!=e[1]||8!=e[2])throw"invalid gzip data";var t=e[3],n=10;4&t&&(n+=e[10]|2+(e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(2&t)},we=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},be=function(e){return 10+(e.filename&&e.filename.length+1||0)},xe=function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},Ie=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function Me(e,t){return t||"function"!=typeof e||(t=e,e={}),this.ondata=t,e}var Ae=function(){function e(e,t){t||"function"!=typeof e||(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(Q(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e}(),ke=function(){return function(e,t){fe([re,function(){return[he,Ae]}],this,Me.call(this,e,t),(function(e){var t=new Ae(e.data);onmessage=he(t)}),6)}}();function Ee(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ue(e,t,[re],(function(e){return le(Te(e.data[0],e.data[1]))}),0,n)}function Te(e,t){return Q(e,t||{},0,0)}var Pe=function(){function e(e){this.s={},this.p=new l(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var t=this.p.length,n=new l(t+e.length);n.set(this.p),n.set(e,t),this.p=n},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=N(this.p,this.o,this.s);this.ondata(R(n,t,this.s.b),this.d),this.o=R(n,this.s.b-32768),this.s.b=this.o.length,this.p=R(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e}(),Ce=function(){return function(e){this.ondata=e,fe([ne,function(){return[he,Pe]}],this,0,(function(){var e=new Pe;onmessage=he(e)}),7)}}();function Fe(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ue(e,t,[ne],(function(e){return le(Se(e.data[0],ce(e.data[1])))}),1,n)}function Se(e,t){return N(e,t)}var Oe=function(){function e(e,t){this.c=Z(),this.l=0,this.v=1,Ae.call(this,e,t)}return e.prototype.push=function(e,t){Ae.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=Q(e,this.o,this.v&&be(this.o),t&&8,!t);this.v&&(ve(n,this.o),this.v=0),t&&(ge(n,n.length-8,this.c.d()),ge(n,n.length-4,this.l)),this.ondata(n,t)},e}(),Le=function(){return function(e,t){fe([re,oe,function(){return[he,Ae,Oe]}],this,Me.call(this,e,t),(function(e){var t=new Oe(e.data);onmessage=he(t)}),8)}}();function De(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ue(e,t,[re,oe,function(){return[Re]}],(function(e){return le(Re(e.data[0],e.data[1]))}),2,n)}function Re(e,t){t||(t={});var n=Z(),r=e.length;n.p(e);var o=Q(e,t,be(t),8),i=o.length;return ve(o,t),ge(o,i-8,n.d()),ge(o,i-4,r),o}var Ne=function(){function e(e){this.v=1,Pe.call(this,e)}return e.prototype.push=function(e,t){if(Pe.prototype.e.call(this,e),this.v){var n=this.p.length>3?ye(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Pe.prototype.c.call(this,t)},e}(),Ve=function(){return function(e){this.ondata=e,fe([ne,ie,function(){return[he,Pe,Ne]}],this,0,(function(){var e=new Ne;onmessage=he(e)}),9)}}();function je(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ue(e,t,[ne,ie,function(){return[ze]}],(function(e){return le(ze(e.data[0]))}),3,n)}function ze(e,t){return N(e.subarray(ye(e),-8),t||new l(we(e)))}var Be=function(){function e(e,t){this.c=K(),this.v=1,Ae.call(this,e,t)}return e.prototype.push=function(e,t){Ae.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=Q(e,this.o,this.v&&2,t&&4,!t);this.v&&(xe(n,this.o),this.v=0),t&&ge(n,n.length-4,this.c.d()),this.ondata(n,t)},e}(),Ue=function(){return function(e,t){fe([re,ae,function(){return[he,Ae,Be]}],this,Me.call(this,e,t),(function(e){var t=new Be(e.data);onmessage=he(t)}),10)}}();function _e(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ue(e,t,[re,ae,function(){return[Ge]}],(function(e){return le(Ge(e.data[0],e.data[1]))}),4,n)}function Ge(e,t){t||(t={});var n=K();n.p(e);var r=Q(e,t,2,4);return xe(r,t),ge(r,r.length-4,n.d()),r}var $e=function(){function e(e){this.v=1,Pe.call(this,e)}return e.prototype.push=function(e,t){if(Pe.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Pe.prototype.c.call(this,t)},e}(),Xe=function(){return function(e){this.ondata=e,fe([ne,se,function(){return[he,Pe,$e]}],this,0,(function(){var e=new $e;onmessage=he(e)}),11)}}();function We(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return ue(e,t,[ne,se,function(){return[He]}],(function(e){return le(He(e.data[0],ce(e.data[1])))}),5,n)}function He(e,t){return N((Ie(e),e.subarray(2,-4)),t)}var qe=function(){function e(e){this.G=Ne,this.I=Pe,this.Z=$e,this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,t);else{if(this.p&&this.p.length){var n=new l(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var r=this,o=function(){r.ondata.apply(r,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(o):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(o):new this.Z(o),this.s.push(this.p,t),this.p=null}}},e}(),Ze=function(){function e(e){this.G=Ve,this.I=Ce,this.Z=Xe,this.ondata=e}return e.prototype.push=function(e,t){qe.prototype.push.call(this,e,t)},e}();function Ke(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";return 31==e[0]&&139==e[1]&&8==e[2]?je(e,t,n):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Fe(e,t,n):We(e,t,n)}function Qe(e,t){return 31==e[0]&&139==e[1]&&8==e[2]?ze(e,t):8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31?Se(e,t):He(e,t)}var Ye=function(e,t,n,r){for(var o in e){var i=e[o],a=t+o;i instanceof l?n[a]=[i,r]:Array.isArray(i)?n[a]=[i[0],Y(r,i[1])]:Ye(i,a+"/",n,r)}},Je="undefined"!=typeof TextEncoder&&new TextEncoder,et="undefined"!=typeof TextDecoder&&new TextDecoder,tt=0;try{et.decode(W,{stream:!0}),tt=1}catch(Jt){}var nt=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return[t,R(e,n-1)];o?3==o?(r=((15&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536,t+=String.fromCharCode(55296|r>>10,56320|1023&r)):t+=1&o?String.fromCharCode((31&r)<<6|63&e[n++]):String.fromCharCode((15&r)<<12|(63&e[n++])<<6|63&e[n++]):t+=String.fromCharCode(r)}},rt=function(){function e(e){this.ondata=e,tt?this.t=new TextDecoder:this.p=W}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(t=!!t,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),t),t){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var n=new l(this.p.length+e.length);n.set(this.p),n.set(e,this.p.length);var r=nt(n),o=r[0],i=r[1];if(t){if(i.length)throw"invalid utf-8 data";this.p=null}else this.p=i;this.ondata(o,t)}},e}(),ot=function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(it(e),this.d=t||!1)},e}();function it(e,t){if(t){for(var n=new l(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}if(Je)return Je.encode(e);var o=e.length,i=new l(e.length+(e.length>>1)),a=0,s=function(e){i[a++]=e};for(r=0;r<o;++r){if(a+5>i.length){var c=new l(a+8+(o-r<<1));c.set(i),i=c}var u=e.charCodeAt(r);u<128||t?s(u):u<2048?(s(192|u>>6),s(128|63&u)):u>55295&&u<57344?(s(240|(u=65536+(1047552&u)|1023&e.charCodeAt(++r))>>18),s(128|u>>12&63),s(128|u>>6&63),s(128|63&u)):(s(224|u>>12),s(128|u>>6&63),s(128|63&u))}return R(i,0,a)}function at(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}if(et)return et.decode(e);var o=nt(e),i=o[0];if(o[1].length)throw"invalid utf-8 data";return i}var st=function(e){return 1==e?3:e<6?2:9==e?1:0},lt=function(e,t){return t+30+pe(e,t+26)+pe(e,t+28)},ct=function(e,t,n){var r=pe(e,t+28),o=at(e.subarray(t+46,t+46+r),!(2048&pe(e,t+8))),i=t+46+r,a=de(e,t+20),s=n&&4294967295==a?ut(e,i):[a,de(e,t+24),de(e,t+42)],l=s[0],c=s[1],u=s[2];return[pe(e,t+10),l,c,o,i+pe(e,t+30)+pe(e,t+32),u]},ut=function(e,t){for(;1!=pe(e,t);t+=4+pe(e,t+2));return[me(e,t+12),me(e,t+4),me(e,t+20)]},ht=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},ft=function(e,t,n,r,o,i,a,s){var l=r.length,c=n.extra,u=s&&s.length,h=ht(c);ge(e,t,null!=a?33639248:67324752),t+=4,null!=a&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(null==i&&8),e[t++]=o&&8,e[t++]=255&n.compression,e[t++]=n.compression>>8;var f=new Date(null==n.mtime?Date.now():n.mtime),p=f.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(ge(e,t,p<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>>1),t+=4,null!=i&&(ge(e,t,n.crc),ge(e,t+4,i),ge(e,t+8,n.size)),ge(e,t+12,l),ge(e,t+14,h),t+=16,null!=a&&(ge(e,t,u),ge(e,t+6,n.attrs),ge(e,t+10,a),t+=14),e.set(r,t),t+=l,h)for(var d in c){var m=c[d],g=m.length;ge(e,t,+d),ge(e,t+2,g),e.set(m,t+4),t+=4+g}return u&&(e.set(s,t),t+=u),t},pt=function(e,t,n,r,o){ge(e,t,101010256),ge(e,t+8,n),ge(e,t+10,n),ge(e,t+12,r),ge(e,t+16,o)},dt=function(){function e(e){this.filename=e,this.c=Z(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e}(),mt=function(){function e(e,t){var n=this;t||(t={}),dt.call(this,e),this.d=new Ae(t,(function(e,t){n.ondata(null,e,t)})),this.compression=8,this.flag=st(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(Jt){this.ondata(Jt,null,t)}},e.prototype.push=function(e,t){dt.prototype.push.call(this,e,t)},e}(),gt=function(){function e(e,t){var n=this;t||(t={}),dt.call(this,e),this.d=new ke(t,(function(e,t,r){n.ondata(e,t,r)})),this.compression=8,this.flag=st(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){dt.prototype.push.call(this,e,t)},e}(),vt=function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var t=this;if(2&this.d)throw"stream finished";var n=it(e.filename),r=n.length,o=e.comment,i=o&&it(o),a=r!=e.filename.length||i&&o.length!=i.length,s=r+ht(e.extra)+30;if(r>65535)throw"filename too long";var c=new l(s);ft(c,0,e,n,a);var u=[c],h=function(){for(var e=0,n=u;e<n.length;e++){var r=n[e];t.ondata(null,r,!1)}u=[]},f=this.d;this.d=0;var p=this.u.length,d=Y(e,{f:n,u:a,o:i,t:function(){e.terminate&&e.terminate()},r:function(){if(h(),f){var e=t.u[p+1];e?e.r():t.d=1}f=1}}),m=0;e.ondata=function(n,r,o){if(n)t.ondata(n,r,o),t.terminate();else if(m+=r.length,u.push(r),o){var i=new l(16);ge(i,0,134695760),ge(i,4,e.crc),ge(i,8,m),ge(i,12,e.size),u.push(i),d.c=m,d.b=s+m+16,d.crc=e.crc,d.size=e.size,f&&d.r(),f=1}else f&&h()},this.u.push(d)},e.prototype.end=function(){var e=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,t=0,n=0,r=0,o=this.u;r<o.length;r++){n+=46+(c=o[r]).f.length+ht(c.extra)+(c.o?c.o.length:0)}for(var i=new l(n+22),a=0,s=this.u;a<s.length;a++){var c=s[a];ft(i,e,c,c.f,c.u,c.c,t,c.o),e+=46+c.f.length+ht(c.extra)+(c.o?c.o.length:0),t+=c.b}pt(i,e,this.u.length,n,t),this.ondata(null,i,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){t[e].t()}this.d=2},e}();function yt(e,t,n){if(n||(n=t,t={}),"function"!=typeof n)throw"no callback";var r={};Ye(e,"",r,t);var o=Object.keys(r),i=o.length,a=0,s=0,c=i,u=new Array(i),h=[],f=function(){for(var e=0;e<h.length;++e)h[e]()},p=function(){var e=new l(s+22),t=a,r=s-a;s=0;for(var o=0;o<c;++o){var i=u[o];try{var h=i.c.length;ft(e,s,i,i.f,i.u,h);var f=30+i.f.length+ht(i.extra),p=s+f;e.set(i.c,p),ft(e,a,i,i.f,i.u,h,s,i.m),a+=16+f+(i.m?i.m.length:0),s=p+h}catch(Jt){return n(Jt,null)}}pt(e,a,u.length,r,t),n(null,e)};i||p();for(var d=function(e){var t=o[e],l=r[t],c=l[0],d=l[1],m=Z(),g=c.length;m.p(c);var v=it(t),y=v.length,w=d.comment,b=w&&it(w),x=b&&b.length,I=ht(d.extra),M=0==d.level?0:8,A=function(r,o){if(r)f(),n(r,null);else{var l=o.length;u[e]=Y(d,{size:g,crc:m.d(),c:o,f:v,m:b,u:y!=t.length||b&&w.length!=x,compression:M}),a+=30+y+I+l,s+=76+2*(y+I)+(x||0)+l,--i||p()}};if(y>65535&&A("filename too long",null),M)if(g<16e4)try{A(null,Te(c,d))}catch(Jt){A(Jt,null)}else h.push(Ee(c,d,A));else A(null,c)},m=0;m<c;++m)d(m);return f}function wt(e,t){t||(t={});var n={},r=[];Ye(e,"",n,t);var o=0,i=0;for(var a in n){var s=n[a],c=s[0],u=s[1],h=0==u.level?0:8,f=(A=it(a)).length,p=u.comment,d=p&&it(p),m=d&&d.length,g=ht(u.extra);if(f>65535)throw"filename too long";var v=h?Te(c,u):c,y=v.length,w=Z();w.p(c),r.push(Y(u,{size:c.length,crc:w.d(),c:v,f:A,m:d,u:f!=a.length||d&&p.length!=m,o:o,compression:h})),o+=30+f+g+y,i+=76+2*(f+g)+(m||0)+y}for(var b=new l(i+22),x=o,I=i-o,M=0;M<r.length;++M){var A=r[M];ft(b,A.o,A,A.f,A.u,A.c.length);var k=30+A.f.length+ht(A.extra);b.set(A.c,A.o+k),ft(b,o,A,A.f,A.u,A.c.length,A.o,A.m),o+=16+k+(A.m?A.m.length:0)}return pt(b,o,r.length,I,x),b}var bt=function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e}(),xt=function(){function e(){var e=this;this.i=new Pe((function(t,n){e.ondata(null,t,n)}))}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(Jt){this.ondata(Jt,e,t)}},e.compression=8,e}(),It=function(){function e(e,t){var n=this;t<32e4?this.i=new Pe((function(e,t){n.ondata(null,e,t)})):(this.i=new Ce((function(e,t,r){n.ondata(e,t,r)})),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=R(e,0)),this.i.push(e,t)},e.compression=8,e}(),Mt=function(){function e(e){this.onfile=e,this.k=[],this.o={0:bt},this.p=W}return e.prototype.push=function(e,t){var n=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var r=Math.min(this.c,e.length),o=e.subarray(0,r);if(this.c-=r,this.d?this.d.push(o,!this.c):this.k[0].push(o),(e=e.subarray(r)).length)return this.push(e,t)}else{var i=0,a=0,s=void 0,c=void 0;this.p.length?e.length?((c=new l(this.p.length+e.length)).set(this.p),c.set(e,this.p.length)):c=this.p:c=e;for(var u=c.length,h=this.c,f=h&&this.d,p=function(){var e,t=de(c,a);if(67324752==t){i=1,s=a,d.d=null,d.c=0;var r=pe(c,a+6),o=pe(c,a+8),l=2048&r,f=8&r,p=pe(c,a+26),m=pe(c,a+28);if(u>a+30+p+m){var g=[];d.k.unshift(g),i=2;var v,y=de(c,a+18),w=de(c,a+22),b=at(c.subarray(a+30,a+=30+p),!l);4294967295==y?(e=f?[-2]:ut(c,a),y=e[0],w=e[1]):f&&(y=-1),a+=m,d.c=y;var x={name:b,compression:o,start:function(){if(!x.ondata)throw"no callback";if(y){var e=n.o[o];if(!e)throw"unknown compression type "+o;(v=y<0?new e(b):new e(b,y,w)).ondata=function(e,t,n){x.ondata(e,t,n)};for(var t=0,r=g;t<r.length;t++){var i=r[t];v.push(i,!1)}n.k[0]==g&&n.c?n.d=v:v.push(W,!0)}else x.ondata(null,W,!0)},terminate:function(){v&&v.terminate&&v.terminate()}};y>=0&&(x.size=y,x.originalSize=w),d.onfile(x)}return"break"}if(h){if(134695760==t)return s=a+=12+(-2==h&&8),i=3,d.c=0,"break";if(33639248==t)return s=a-=4,i=3,d.c=0,"break"}},d=this;a<u-4;++a){if("break"===p())break}if(this.p=W,h<0){var m=i?c.subarray(0,s-12-(-2==h&&8)-(134695760==de(c,s-16)&&4)):c.subarray(0,a);f?f.push(m,!!i):this.k[+(2==i)].push(m)}if(2&i)return this.push(c.subarray(a),t);this.p=c.subarray(a)}if(t){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e}();function At(e,t){if("function"!=typeof t)throw"no callback";for(var n=[],r=function(){for(var e=0;e<n.length;++e)n[e]()},o={},i=e.length-22;101010256!=de(e,i);--i)if(!i||e.length-i>65558)return void t("invalid zip file",null);var a=pe(e,i+8);a||t(null,{});var s=a,c=de(e,i+16),u=4294967295==c;if(u){if(i=de(e,i-12),101075792!=de(e,i))return void t("invalid zip file",null);s=a=de(e,i+32),c=de(e,i+48)}for(var h=function(s){var h=ct(e,c,u),f=h[0],p=h[1],d=h[2],m=h[3],g=h[4],v=h[5],y=lt(e,v);c=g;var w=function(e,n){e?(r(),t(e,null)):(o[m]=n,--a||t(null,o))};if(f)if(8==f){var b=e.subarray(y,y+p);if(p<32e4)try{w(null,Se(b,new l(d)))}catch(i){w(i,null)}else n.push(Fe(b,{size:d},w))}else w("unknown compression type "+f,null);else w(null,R(e,y,y+p))},f=0;f<s;++f)h();return r}function kt(e){for(var t={},n=e.length-22;101010256!=de(e,n);--n)if(!n||e.length-n>65558)throw"invalid zip file";var r=pe(e,n+8);if(!r)return{};var o=de(e,n+16),i=4294967295==o;if(i){if(n=de(e,n-12),101075792!=de(e,n))throw"invalid zip file";r=de(e,n+32),o=de(e,n+48)}for(var a=0;a<r;++a){var s=ct(e,o,i),c=s[0],u=s[1],h=s[2],f=s[3],p=s[4],d=s[5],m=lt(e,d);if(o=p,c){if(8!=c)throw"unknown compression type "+c;t[f]=Se(e.subarray(m,m+u),new l(h))}else t[f]=R(e,m,m+u)}return t}function Et(e,t,n){const r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;let o=e,i=r,a=Math.floor((o+i)/2);for(;t<n[a]||t>=n[a+1];)t<n[a]?i=a:o=a,a=Math.floor((o+i)/2);return a}function Tt(e,t,n,r){const o=[],i=[],a=[];o[0]=1;for(let s=1;s<=n;++s){i[s]=t-r[e+1-s],a[s]=r[e+s]-t;let n=0;for(let e=0;e<s;++e){const t=a[e+1],r=i[s-e],l=o[e]/(t+r);o[e]=n+t*l,n=r*l}o[s]=n}return o}function Pt(e,t){let n=1;for(let o=2;o<=e;++o)n*=o;let r=1;for(let o=2;o<=t;++o)r*=o;for(let o=2;o<=e-t;++o)r*=o;return n/r}function Ct(e,t,n,r,i){return function(e){const t=e.length,n=[],r=[];for(let a=0;a<t;++a){const t=e[a];n[a]=new o.Vector3(t.x,t.y,t.z),r[a]=t.w}const i=[];for(let o=0;o<t;++o){const e=n[o].clone();for(let t=1;t<=o;++t)e.sub(i[o-t].clone().multiplyScalar(Pt(o,t)*r[t]));i[o]=e.divideScalar(r[0])}return i}(function(e,t,n,r,i){const a=i<e?i:e,s=[],l=Et(e,r,t),c=function(e,t,n,r,o){const i=[];for(let h=0;h<=n;++h)i[h]=0;const a=[];for(let h=0;h<=r;++h)a[h]=i.slice(0);const s=[];for(let h=0;h<=n;++h)s[h]=i.slice(0);s[0][0]=1;const l=i.slice(0),c=i.slice(0);for(let h=1;h<=n;++h){l[h]=t-o[e+1-h],c[h]=o[e+h]-t;let n=0;for(let e=0;e<h;++e){const t=c[e+1],r=l[h-e];s[h][e]=t+r;const o=s[e][h-1]/s[h][e];s[e][h]=n+t*o,n=r*o}s[h][h]=n}for(let h=0;h<=n;++h)a[0][h]=s[h][n];for(let h=0;h<=n;++h){let e=0,t=1;const o=[];for(let r=0;r<=n;++r)o[r]=i.slice(0);o[0][0]=1;for(let i=1;i<=r;++i){let r=0;const l=h-i,c=n-i;h>=i&&(o[t][0]=o[e][0]/s[c+1][l],r=o[t][0]*s[l][c]);const u=h-1<=c?i-1:n-h;for(let n=l>=-1?1:-l;n<=u;++n)o[t][n]=(o[e][n]-o[e][n-1])/s[c+1][l+n],r+=o[t][n]*s[l+n][c];h<=c&&(o[t][i]=-o[e][i-1]/s[c+1][h],r+=o[t][i]*s[h][c]),a[i][h]=r;const f=e;e=t,t=f}}let u=n;for(let h=1;h<=r;++h){for(let e=0;e<=n;++e)a[h][e]*=u;u*=n-h}return a}(l,r,e,a,t),u=[];for(let o=0;o<n.length;++o){const e=n[o].clone(),t=e.w;e.x*=t,e.y*=t,e.z*=t,u[o]=e}for(let o=0;o<=a;++o){const t=u[l-e].clone().multiplyScalar(c[o][0]);for(let n=1;n<=e;++n)t.add(u[l-e+n].clone().multiplyScalar(c[o][n]));s[o]=t}for(let h=a+1;h<=i+1;++h)s[h]=new o.Vector4(0,0,0);return s}(e,t,n,r,i))}class Ft extends o.Curve{constructor(e,t,n,r,i){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=i||this.knots.length-1;for(let a=0;a<n.length;++a){const e=n[a];this.controlPoints[a]=new o.Vector4(e.x,e.y,e.z,e.w)}}getPoint(e,t=new o.Vector3){const n=t,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=function(e,t,n,r){const i=Et(e,r,t),a=Tt(i,r,e,t),s=new o.Vector4(0,0,0,0);for(let o=0;o<=e;++o){const t=n[i-e+o],r=a[o],l=t.w*r;s.x+=t.x*l,s.y+=t.y*l,s.z+=t.z*l,s.w+=t.w*r}return s}(this.degree,this.knots,this.controlPoints,r);return 1!==i.w&&i.divideScalar(i.w),n.set(i.x,i.y,i.z)}getTangent(e,t=new o.Vector3){const n=t,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=Ct(this.degree,this.knots,this.controlPoints,r,1);return n.copy(i[1]).normalize(),n}}let St,Ot,Lt;class Dt extends o.Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,a=""===i.path?o.LoaderUtils.extractUrlBase(e):i.path,s=new o.FileLoader(this.manager);s.setPath(i.path),s.setResponseType("arraybuffer"),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(n,a))}catch(Jt){r?r(Jt):console.error(Jt),i.manager.itemError(e)}}),n,r)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===Qt(e,0,t.length)}(e))St=(new zt).parse(e);else{const t=Qt(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(t){const r=e[t-1];return e=e.slice(n+t),n++,r}for(let o=0;o<t.length;++o){if(r(1)===t[o])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(_t(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+_t(t));St=(new jt).parse(t)}const n=new o.TextureLoader(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new Rt(n,this.manager).parse(St)}}class Rt{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Ot=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),o=(new Nt).parse(r);return this.parseScene(r,o,n),Lt}parseConnections(){const e=new Map;if("Connections"in St){St.Connections.connections.forEach((function(t){const n=t[0],r=t[1],o=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const i={ID:r,relationship:o};e.get(n).parents.push(i),e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:n,relationship:o};e.get(r).children.push(a)}))}return e}parseImages(){const e={},t={};if("Video"in St.Objects){const n=St.Objects.Video;for(const r in n){const o=n[r];if(e[parseInt(r)]=o.RelativeFilename||o.Filename,"Content"in o){const e=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,i="string"===typeof o.Content&&""!==o.Content;if(e||i){const e=this.parseImage(n[r]);t[o.RelativeFilename||o.Filename]=e}}}}for(const n in e){const r=e[n];void 0!==t[r]?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let o;switch(r){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),o="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"===typeof t)return"data:"+o+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:o}))}}parseTextures(e){const t=new Map;if("Texture"in St.Objects){const n=St.Objects.Texture;for(const r in n){const o=this.parseTexture(n[r],e);t.set(parseInt(r),o)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const r=e.WrapModeU,i=e.WrapModeV,a=void 0!==r?r.value:0,s=void 0!==i?i.value:0;if(n.wrapS=0===a?o.RepeatWrapping:o.ClampToEdgeWrapping,n.wrapT=0===s?o.RepeatWrapping:o.ClampToEdgeWrapping,"Scaling"in e){const t=e.Scaling.value;n.repeat.x=t[0],n.repeat.y=t[1]}return n}loadTexture(e,t){let n;const r=this.textureLoader.path,i=Ot.get(e.id).children;let a;void 0!==i&&i.length>0&&void 0!==t[i[0].ID]&&(n=t[i[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const s=e.FileName.slice(-3).toLowerCase();if("tga"===s){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),a=new o.Texture):(t.setPath(this.textureLoader.path),a=t.load(n))}else"psd"===s?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new o.Texture):a=this.textureLoader.load(n);return this.textureLoader.setPath(r),a}parseMaterials(e){const t=new Map;if("Material"in St.Objects){const n=St.Objects.Material;for(const r in n){const o=this.parseMaterial(n[r],e);null!==o&&t.set(parseInt(r),o)}}return t}parseMaterial(e,t){const n=e.id,r=e.attrName;let i=e.ShadingModel;if("object"===typeof i&&(i=i.value),!Ot.has(n))return null;const a=this.parseParameters(e,t,n);let s;switch(i.toLowerCase()){case"phong":s=new o.MeshPhongMaterial;break;case"lambert":s=new o.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',i),s=new o.MeshPhongMaterial}return s.setValues(a),s.name=r,s}parseParameters(e,t,n){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new o.Color).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(r.color=(new o.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new o.Color).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(r.emissive=(new o.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new o.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new o.Color).fromArray(e.SpecularColor.value));const i=this;return Ot.get(n).children.forEach((function(e){const n=e.relationship;switch(n){case"Bump":r.bumpMap=i.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":r.aoMap=i.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=i.getTexture(t,e.ID),void 0!==r.map&&(r.map.encoding=o.sRGBEncoding);break;case"DisplacementColor":r.displacementMap=i.getTexture(t,e.ID);break;case"EmissiveColor":r.emissiveMap=i.getTexture(t,e.ID),void 0!==r.emissiveMap&&(r.emissiveMap.encoding=o.sRGBEncoding);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=i.getTexture(t,e.ID);break;case"ReflectionColor":r.envMap=i.getTexture(t,e.ID),void 0!==r.envMap&&(r.envMap.mapping=o.EquirectangularReflectionMapping,r.envMap.encoding=o.sRGBEncoding);break;case"SpecularColor":r.specularMap=i.getTexture(t,e.ID),void 0!==r.specularMap&&(r.specularMap.encoding=o.sRGBEncoding);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=i.getTexture(t,e.ID),r.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),r}getTexture(e,t){return"LayeredTexture"in St.Objects&&t in St.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Ot.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in St.Objects){const n=St.Objects.Deformer;for(const r in n){const o=n[r],i=Ot.get(parseInt(r));if("Skin"===o.attrType){const t=this.parseSkeleton(i,n);t.ID=r,i.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=i.parents[0].ID,e[r]=t}else if("BlendShape"===o.attrType){const e={id:r};e.rawTargets=this.parseMorphTargets(i,n),e.id=r,i.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach((function(e){const r=t[e.ID];if("Cluster"!==r.attrType)return;const i={ID:e.ID,indices:[],weights:[],transformLink:(new o.Matrix4).fromArray(r.TransformLink.a)};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),n.push(i)})),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const o=e.children[r],i=t[o.ID],a={name:i.attrName,initialWeight:i.DeformPercent,id:i.id,fullWeights:i.FullWeights.a};if("BlendShapeChannel"!==i.attrType)return;a.geoID=Ot.get(parseInt(o.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(a)}return n}parseScene(e,t,n){Lt=new o.Group;const r=this.parseModels(e.skeletons,t,n),i=St.Objects.Model,a=this;r.forEach((function(e){const t=i[e.ID];a.setLookAtProperties(e,t);Ot.get(e.ID).parents.forEach((function(t){const n=r.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&Lt.add(e)})),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),Lt.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=qt(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const s=(new Vt).parse();1===Lt.children.length&&Lt.children[0].isGroup&&(Lt.children[0].animations=s,Lt=Lt.children[0]),Lt.animations=s}parseModels(e,t,n){const r=new Map,i=St.Objects.Model;for(const a in i){const s=parseInt(a),l=i[a],c=Ot.get(s);let u=this.buildSkeleton(c,e,s,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,n);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new o.Bone;break;case"Null":default:u=new o.Group}u.name=l.attrName?o.PropertyBinding.sanitizeNodeName(l.attrName):"",u.ID=s}this.getTransformData(u,l),r.set(s,u)}return r}buildSkeleton(e,t,n,r){let i=null;return e.parents.forEach((function(e){for(const a in t){const s=t[a];s.rawBones.forEach((function(t,a){if(t.ID===e.ID){const e=i;i=new o.Bone,i.matrixWorld.copy(t.transformLink),i.name=r?o.PropertyBinding.sanitizeNodeName(r):"",i.ID=n,s.bones[a]=i,null!==e&&i.add(e)}}))}})),i}createCamera(e){let t,n;if(e.children.forEach((function(e){const t=St.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new o.Object3D;else{let e=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(e=1);let r=1;void 0!==n.NearPlane&&(r=n.NearPlane.value/1e3);let i=1e3;void 0!==n.FarPlane&&(i=n.FarPlane.value/1e3);let a=window.innerWidth,s=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(a=n.AspectWidth.value,s=n.AspectHeight.value);const l=a/s;let c=45;void 0!==n.FieldOfView&&(c=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(e){case 0:t=new o.PerspectiveCamera(c,l,r,i),null!==u&&t.setFocalLength(u);break;case 1:t=new o.OrthographicCamera(-a/2,a/2,s/2,-s/2,r,i);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new o.Object3D}}return t}createLight(e){let t,n;if(e.children.forEach((function(e){const t=St.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new o.Object3D;else{let e;e=void 0===n.LightType?0:n.LightType.value;let r=16777215;void 0!==n.Color&&(r=(new o.Color).fromArray(n.Color.value));let i=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(i=0);let a=0;void 0!==n.FarAttenuationEnd&&(a=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const s=1;switch(e){case 0:t=new o.PointLight(r,i,a,s);break;case 1:t=new o.DirectionalLight(r,i);break;case 2:let e=Math.PI/3;void 0!==n.InnerAngle&&(e=o.MathUtils.degToRad(n.InnerAngle.value));let l=0;void 0!==n.OuterAngle&&(l=o.MathUtils.degToRad(n.OuterAngle.value),l=Math.max(l,1)),t=new o.SpotLight(r,i,a,e,l,s);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new o.PointLight(r,i)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,i=null,a=null;const s=[];return e.children.forEach((function(e){t.has(e.ID)&&(i=t.get(e.ID)),n.has(e.ID)&&s.push(n.get(e.ID))})),s.length>1?a=s:s.length>0?a=s[0]:(a=new o.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in i.attributes&&s.forEach((function(e){e.vertexColors=!0})),i.FBX_Deformer?(r=new o.SkinnedMesh(i,a),r.normalizeSkinWeights()):r=new o.Mesh(i,a),r}createCurve(e,t){const n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),r=new o.LineBasicMaterial({color:3342591,linewidth:1});return new o.Line(n,r)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?Zt(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){if("LookAtProperty"in t){Ot.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const n=St.Objects.Model[t.ID];if("Lcl_Translation"in n){const t=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),Lt.add(e.target)):e.lookAt((new o.Vector3).fromArray(t))}}}))}}bindSkeleton(e,t,n){const r=this.parsePoseNodes();for(const i in e){const a=e[i];Ot.get(parseInt(a.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;Ot.get(t).parents.forEach((function(e){if(n.has(e.ID)){n.get(e.ID).bind(new o.Skeleton(a.bones),r[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in St.Objects){const t=St.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){const r=t[n].PoseNode;Array.isArray(r)?r.forEach((function(t){e[t.Node]=(new o.Matrix4).fromArray(t.Matrix.a)})):e[r.Node]=(new o.Matrix4).fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in St&&"AmbientColor"in St.GlobalSettings){const e=St.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(0!==t||0!==n||0!==r){const e=new o.Color(t,n,r);Lt.add(new o.AmbientLight(e,1))}}}}class Nt{parse(e){const t=new Map;if("Geometry"in St.Objects){const n=St.Objects.Geometry;for(const r in n){const o=Ot.get(parseInt(r)),i=this.parseGeometry(o,n[r],e);t.set(parseInt(r),i)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,o=[],i=e.parents.map((function(e){return St.Objects.Model[e.ID]}));if(0===i.length)return;const a=e.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&o.push(n.morphTargets[e.ID])}));const s=i[0],l={};"RotationOrder"in s&&(l.eulerOrder=Zt(s.RotationOrder.value)),"InheritType"in s&&(l.inheritType=parseInt(s.InheritType.value)),"GeometricTranslation"in s&&(l.translation=s.GeometricTranslation.value),"GeometricRotation"in s&&(l.rotation=s.GeometricRotation.value),"GeometricScaling"in s&&(l.scale=s.GeometricScaling.value);const c=qt(l);return this.genGeometry(t,a,o,c)}genGeometry(e,t,n,r){const i=new o.BufferGeometry;e.attrName&&(i.name=e.attrName);const a=this.parseGeoNode(e,t),s=this.genBuffers(a),l=new o.Float32BufferAttribute(s.vertex,3);if(l.applyMatrix4(r),i.setAttribute("position",l),s.colors.length>0&&i.setAttribute("color",new o.Float32BufferAttribute(s.colors,3)),t&&(i.setAttribute("skinIndex",new o.Uint16BufferAttribute(s.weightsIndices,4)),i.setAttribute("skinWeight",new o.Float32BufferAttribute(s.vertexWeights,4)),i.FBX_Deformer=t),s.normal.length>0){const e=(new o.Matrix3).getNormalMatrix(r),t=new o.Float32BufferAttribute(s.normal,3);t.applyNormalMatrix(e),i.setAttribute("normal",t)}if(s.uvs.forEach((function(e,t){let n="uv"+(t+1).toString();0===t&&(n="uv"),i.setAttribute(n,new o.Float32BufferAttribute(s.uvs[t],2))})),a.material&&"AllSame"!==a.material.mappingType){let e=s.materialIndex[0],t=0;if(s.materialIndex.forEach((function(n,r){n!==e&&(i.addGroup(t,r-t,e),e=n,t=r)})),i.groups.length>0){const t=i.groups[i.groups.length-1],n=t.start+t.count;n!==s.materialIndex.length&&i.addGroup(n,s.materialIndex.length-n,e)}0===i.groups.length&&i.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(i,e,n,r),i}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,o){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[o]})}))}))),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,o=!1,i=[],a=[],s=[],l=[],c=[],u=[];const h=this;return e.vertexIndices.forEach((function(f,p){let d,m=!1;f<0&&(f^=-1,m=!0);let g=[],v=[];if(i.push(3*f,3*f+1,3*f+2),e.color){const t=Xt(p,n,f,e.color);s.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[f]&&e.weightTable[f].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const e=[0,0,0,0],t=[0,0,0,0];v.forEach((function(n,r){let o=n,i=g[r];t.forEach((function(t,n,r){if(o>t){r[n]=o,o=t;const a=e[n];e[n]=i,i=a}}))})),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)c.push(v[e]),u.push(g[e])}if(e.normal){const t=Xt(p,n,f,e.normal);a.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(d=Xt(p,n,f,e.material)[0]),e.uv&&e.uv.forEach((function(e,t){const r=Xt(p,n,f,e);void 0===l[t]&&(l[t]=[]),l[t].push(r[0]),l[t].push(r[1])})),r++,m&&(h.genFace(t,e,i,d,a,s,l,c,u,r),n++,r=0,i=[],a=[],s=[],l=[],c=[],u=[])})),t}genFace(e,t,n,r,o,i,a,s,l,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(u-1)]),e.vertexWeights.push(s[4*(u-1)+1]),e.vertexWeights.push(s[4*(u-1)+2]),e.vertexWeights.push(s[4*(u-1)+3]),e.vertexWeights.push(s[4*u]),e.vertexWeights.push(s[4*u+1]),e.vertexWeights.push(s[4*u+2]),e.vertexWeights.push(s[4*u+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(u-1)]),e.weightsIndices.push(l[4*(u-1)+1]),e.weightsIndices.push(l[4*(u-1)+2]),e.weightsIndices.push(l[4*(u-1)+3]),e.weightsIndices.push(l[4*u]),e.weightsIndices.push(l[4*u+1]),e.weightsIndices.push(l[4*u+2]),e.weightsIndices.push(l[4*u+3])),t.color&&(e.colors.push(i[0]),e.colors.push(i[1]),e.colors.push(i[2]),e.colors.push(i[3*(u-1)]),e.colors.push(i[3*(u-1)+1]),e.colors.push(i[3*(u-1)+2]),e.colors.push(i[3*u]),e.colors.push(i[3*u+1]),e.colors.push(i[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(o[0]),e.normal.push(o[1]),e.normal.push(o[2]),e.normal.push(o[3*(u-1)]),e.normal.push(o[3*(u-1)+1]),e.normal.push(o[3*(u-1)+2]),e.normal.push(o[3*u]),e.normal.push(o[3*u+1]),e.normal.push(o[3*u+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(u-1)]),e.uvs[n].push(a[n][2*(u-1)+1]),e.uvs[n].push(a[n][2*u]),e.uvs[n].push(a[n][2*u+1])}))}addMorphTargets(e,t,n,r){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const o=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const i=St.Objects.Geometry[n.geoID];void 0!==i&&o.genMorphGeometry(e,t,i,r,n.name)}))}))}genMorphGeometry(e,t,n,r,i){const a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==n.Vertices?n.Vertices.a:[],l=void 0!==n.Indexes?n.Indexes.a:[],c=3*e.attributes.position.count,u=new Float32Array(c);for(let o=0;o<l.length;o++){const e=3*l[o];u[e]=s[3*o],u[e+1]=s[3*o+1],u[e+2]=s[3*o+2]}const h={vertexIndices:a,vertexPositions:u},f=this.genBuffers(h),p=new o.Float32BufferAttribute(f.vertex,3);p.name=i||n.attrName,p.applyMatrix4(r),e.morphAttributes.position.push(p)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let o=[];return"IndexToDirect"===n&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:o,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let o=[];return"IndexToDirect"===n&&(o=e.UVIndex.a),{dataSize:2,buffer:r,indices:o,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let o=[];return"IndexToDirect"===n&&(o=e.ColorIndex.a),{dataSize:4,buffer:r,indices:o,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,o=[];for(let i=0;i<r.length;++i)o.push(i);return{dataSize:1,buffer:r,indices:o,mappingType:t,referenceType:n}}parseNurbsGeometry(e){if(void 0===Ft)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new o.BufferGeometry;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new o.BufferGeometry;const n=t-1,r=e.KnotVector.a,i=[],a=e.Points.a;for(let u=0,h=a.length;u<h;u+=4)i.push((new o.Vector4).fromArray(a,u));let s,l;if("Closed"===e.Form)i.push(i[0]);else if("Periodic"===e.Form){s=n,l=r.length-1-s;for(let e=0;e<n;++e)i.push(i[e])}const c=new Ft(n,r,i,s,l).getPoints(12*i.length);return(new o.BufferGeometry).setFromPoints(c)}}class Vt{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const r=t[n],o=this.addClip(r);e.push(o)}return e}parseClips(){if(void 0===St.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=St.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const e={id:r.id,attr:r.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=St.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(Gt),values:t[n].KeyValueFloat.a},o=Ot.get(r.id);if(void 0!==o){const t=o.parents[0].ID,n=o.parents[0].relationship;n.match(/X/)?e.get(t).curves.x=r:n.match(/Y/)?e.get(t).curves.y=r:n.match(/Z/)?e.get(t).curves.z=r:n.match(/d|DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=r)}}}parseAnimationLayers(e){const t=St.Objects.AnimationLayer,n=new Map;for(const r in t){const t=[],i=Ot.get(parseInt(r));if(void 0!==i){i.children.forEach((function(n,r){if(e.has(n.ID)){const i=e.get(n.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===t[r]){const e=Ot.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const i=St.Objects.Model[e.toString()];if(void 0===i)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",n);const a={modelName:i.attrName?o.PropertyBinding.sanitizeNodeName(i.attrName):"",ID:i.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Lt.traverse((function(e){e.ID===i.id&&(a.transform=e.matrix,e.userData.transformData&&(a.eulerOrder=e.userData.transformData.eulerOrder))})),a.transform||(a.transform=new o.Matrix4),"PreRotation"in i&&(a.preRotation=i.PreRotation.value),"PostRotation"in i&&(a.postRotation=i.PostRotation.value),t[r]=a}}t[r]&&(t[r][i.attr]=i)}else if(void 0!==i.curves.morph){if(void 0===t[r]){const e=Ot.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,i=Ot.get(e).parents[0].ID,a=Ot.get(i).parents[0].ID,s=Ot.get(a).parents[0].ID,l=St.Objects.Model[s],c={modelName:l.attrName?o.PropertyBinding.sanitizeNodeName(l.attrName):"",morphName:St.Objects.Deformer[e].attrName};t[r]=c}t[r][i.attr]=i}}})),n.set(parseInt(r),t)}}return n}parseAnimStacks(e){const t=St.Objects.AnimationStack,n={};for(const r in t){const o=Ot.get(parseInt(r)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const i=e.get(o[0].ID);n[r]={name:t[r].attrName,layer:i}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new o.AnimationClip(e.name,-1,t)}generateTracks(e){const t=[];let n=new o.Vector3,r=new o.Quaternion,i=new o.Vector3;if(e.transform&&e.transform.decompose(n,r,i),n=n.toArray(),r=(new o.Euler).setFromQuaternion(r,e.eulerOrder).toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==r&&t.push(r)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const n=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==n&&t.push(n)}if(void 0!==e.DeformPercent){const n=this.generateMorphTrack(e);void 0!==n&&t.push(n)}return t}generateVectorTrack(e,t,n,r){const i=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(i,t,n);return new o.VectorKeyframeTrack(e+"."+r,i,a)}generateRotationTrack(e,t,n,r,i,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(o.MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(o.MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(o.MathUtils.degToRad));const s=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(s,t,n);void 0!==r&&((r=r.map(o.MathUtils.degToRad)).push(a),r=(new o.Euler).fromArray(r),r=(new o.Quaternion).setFromEuler(r)),void 0!==i&&((i=i.map(o.MathUtils.degToRad)).push(a),i=(new o.Euler).fromArray(i),i=(new o.Quaternion).setFromEuler(i).invert());const c=new o.Quaternion,u=new o.Euler,h=[];for(let o=0;o<l.length;o+=3)u.set(l[o],l[o+1],l[o+2],a),c.setFromEuler(u),void 0!==r&&c.premultiply(r),void 0!==i&&c.multiply(i),c.toArray(h,o/3*4);return new o.QuaternionKeyframeTrack(e+".quaternion",s,h)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),r=Lt.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new o.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,n=t[0];for(let r=1;r<t.length;r++){const o=t[r];o!==n&&(t[e]=o,n=o,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,n){const r=n,o=[];let i=-1,a=-1,s=-1;return e.forEach((function(e){if(t.x&&(i=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==i){const e=t.x.values[i];o.push(e),r[0]=e}else o.push(r[0]);if(-1!==a){const e=t.y.values[a];o.push(e),r[1]=e}else o.push(r[1]);if(-1!==s){const e=t.z.values[s];o.push(e),r[2]=e}else o.push(r[2])})),o}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],r=e.values[t]-n,o=Math.abs(r);if(o>=180){const i=o/180,a=r/i;let s=n+a;const l=e.times[t-1],c=(e.times[t]-l)/i;let u=l+c;const h=[],f=[];for(;u<e.times[t];)h.push(u),u+=c,f.push(s),s+=a;e.times=Yt(e.times,t,h),e.values=Yt(e.values,t,f)}}}}class jt{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new Ut,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){const o=e.match(/^[\s\t]*;/),i=e.match(/^[\s\t]*$/);if(o||i)return;const a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++r]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),o={name:n},i=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,o):n in a?("PoseNode"===n?a.PoseNode.push(o):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==i.id&&(a[n][i.id]=o)):"number"===typeof i.id?(a[n]={},a[n][i.id]=o):"Properties70"!==n&&(a[n]="PoseNode"===n?[o]:o),"number"===typeof i.id&&(o.id=i.id),""!==i.name&&(o.attrName=i.name),""!==i.type&&(o.attrType=i.type),this.pushStack(o)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),o=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===o&&(o=n.replace(/"/g,"").replace(/,$/,"").trim());const i=this.getCurrentNode();if("Properties70"!==i.name){if("C"===r){const e=o.split(",").slice(1),t=parseInt(e[0]),n=parseInt(e[1]);let a=o.split(",").slice(3);a=a.map((function(e){return e.trim().replace(/^"/,"")})),r="connections",o=[t,n],function(e,t){for(let n=0,r=e.length,o=t.length;n<o;n++,r++)e[r]=t[n]}(o,a),void 0===i[r]&&(i[r]=[])}"Node"===r&&(i.id=o),r in i&&Array.isArray(i[r])?i[r].push(o):"a"!==r?i[r]=o:i.a=o,this.setCurrentProp(i,r),"a"===r&&","!==o.slice(-1)&&(i.a=Kt(o))}else this.parseNodeSpecialProperty(e,r,o)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=Kt(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),o=r[0],i=r[1],a=r[2],s=r[3];let l=r[4];switch(i){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=Kt(l)}this.getPrevNode()[o]={type:i,type2:a,flag:s,value:l},this.setCurrentProp(this.getPrevNode(),o)}}class zt{parse(e){const t=new Bt(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new Ut;for(;!this.endOfContent(t);){const e=this.parseNode(t,n);null!==e&&r.add(e.name,e)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const i=e.getUint8(),a=e.getString(i);if(0===r)return null;const s=[];for(let h=0;h<o;h++)s.push(this.parseProperty(e));const l=s.length>0?s[0]:"",c=s.length>1?s[1]:"",u=s.length>2?s[2]:"";for(n.singleProperty=1===o&&e.getOffset()===r;r>e.getOffset();){const r=this.parseNode(e,t);null!==r&&this.parseSubNode(a,n,r)}return n.propertyList=s,"number"===typeof l&&(n.id=l),""!==c&&(n.attrName=c),""!==u&&(n.attrType=u),""!==a&&(n.name=a),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const e=n.propertyList[0];Array.isArray(e)?(t[n.name]=n,n.a=e):t[n.name]=e}else if("Connections"===e&&"C"===n.name){const e=[];n.propertyList.forEach((function(t,n){0!==n&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){let e=n.propertyList[0],r=n.propertyList[1];const o=n.propertyList[2],i=n.propertyList[3];let a;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),a="Color"===r||"ColorRGB"===r||"Vector"===r||"Vector3D"===r||0===r.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[e]={type:r,type2:o,flag:i,value:a}}else void 0===t[n.name]?"number"===typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const o=e.getUint32(),i=e.getUint32(),a=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(o);case"d":return e.getFloat64Array(o);case"f":return e.getFloat32Array(o);case"i":return e.getInt32Array(o);case"l":return e.getInt64Array(o)}"undefined"===typeof r&&console.error("THREE.FBXLoader: External library fflate.min.js required.");const s=He(new Uint8Array(e.getArrayBuffer(a))),l=new Bt(s.buffer);switch(t){case"b":case"c":return l.getBooleanArray(o);case"d":return l.getFloat64Array(o);case"f":return l.getFloat32Array(o);case"i":return l.getInt32Array(o);case"l":return l.getInt64Array(o)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class Bt{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1===(1&this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),o.LoaderUtils.decodeText(new Uint8Array(t))}}class Ut{add(e,t){this[e]=t}}function _t(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Gt(e){return e/46186158e3}const $t=[];function Xt(e,t,n,r){let o;switch(r.mappingType){case"ByPolygonVertex":o=e;break;case"ByPolygon":o=t;break;case"ByVertice":o=n;break;case"AllSame":o=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(o=r.indices[o]);const i=o*r.dataSize,a=i+r.dataSize;return function(e,t,n,r){for(let o=n,i=0;o<r;o++,i++)e[i]=t[o];return e}($t,r.buffer,i,a)}const Wt=new o.Euler,Ht=new o.Vector3;function qt(e){const t=new o.Matrix4,n=new o.Matrix4,r=new o.Matrix4,i=new o.Matrix4,a=new o.Matrix4,s=new o.Matrix4,l=new o.Matrix4,c=new o.Matrix4,u=new o.Matrix4,h=new o.Matrix4,f=new o.Matrix4,p=new o.Matrix4,d=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(Ht.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(o.MathUtils.degToRad);t.push(e.eulerOrder),n.makeRotationFromEuler(Wt.fromArray(t))}if(e.rotation){const t=e.rotation.map(o.MathUtils.degToRad);t.push(e.eulerOrder),r.makeRotationFromEuler(Wt.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(o.MathUtils.degToRad);t.push(e.eulerOrder),i.makeRotationFromEuler(Wt.fromArray(t)),i.invert()}e.scale&&a.scale(Ht.fromArray(e.scale)),e.scalingOffset&&l.setPosition(Ht.fromArray(e.scalingOffset)),e.scalingPivot&&s.setPosition(Ht.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(Ht.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(Ht.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(f.copy(e.parentMatrix),h.copy(e.parentMatrixWorld));const m=n.clone().multiply(r).multiply(i),g=new o.Matrix4;g.extractRotation(h);const v=new o.Matrix4;v.copyPosition(h);const y=v.clone().invert().multiply(h),w=g.clone().invert().multiply(y),b=a,x=new o.Matrix4;if(0===d)x.copy(g).multiply(m).multiply(w).multiply(b);else if(1===d)x.copy(g).multiply(w).multiply(m).multiply(b);else{const e=(new o.Matrix4).scale((new o.Vector3).setFromMatrixScale(f)).clone().invert(),t=w.clone().multiply(e);x.copy(g).multiply(m).multiply(t).multiply(b)}const I=u.clone().invert(),M=s.clone().invert();let A=t.clone().multiply(c).multiply(u).multiply(n).multiply(r).multiply(i).multiply(I).multiply(l).multiply(s).multiply(a).multiply(M);const k=(new o.Matrix4).copyPosition(A),E=h.clone().multiply(k);return p.copyPosition(E),A=p.clone().multiply(x),A.premultiply(h.invert()),A}function Zt(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function Kt(e){return e.split(",").map((function(e){return parseFloat(e)}))}function Qt(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),o.LoaderUtils.decodeText(new Uint8Array(e,t,n))}function Yt(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}},7011:function(e,t,n){n.d(t,{L:function(){return d}});var r=n(2212);const o=/^[og]\s*(.+)?/,i=/^mtllib /,a=/^usemtl /,s=/^usemap /,l=new r.Vector3,c=new r.Vector3,u=new r.Vector3,h=new r.Vector3,f=new r.Vector3;function p(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"===typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"===typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,o=this.object.geometry.vertices;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,o=this.object.geometry.normals;o.push(r[e+0],r[e+1],r[e+2]),o.push(r[t+0],r[t+1],r[t+2]),o.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,o=this.object.geometry.normals;l.fromArray(r,e),c.fromArray(r,t),u.fromArray(r,n),f.subVectors(u,c),h.subVectors(l,c),f.cross(h),f.normalize(),o.push(f.x,f.y,f.z),o.push(f.x,f.y,f.z),o.push(f.x,f.y,f.z)},addColor:function(e,t,n){const r=this.colors,o=this.object.geometry.colors;void 0!==r[e]&&o.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&o.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&o.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,o=this.object.geometry.uvs;o.push(r[e+0],r[e+1]),o.push(r[t+0],r[t+1]),o.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,o,i,a,s,l){const c=this.vertices.length;let u=this.parseVertexIndex(e,c),h=this.parseVertexIndex(t,c),f=this.parseVertexIndex(n,c);if(this.addVertex(u,h,f),this.addColor(u,h,f),void 0!==a&&""!==a){const e=this.normals.length;u=this.parseNormalIndex(a,e),h=this.parseNormalIndex(s,e),f=this.parseNormalIndex(l,e),this.addNormal(u,h,f)}else this.addFaceNormal(u,h,f);if(void 0!==r&&""!==r){const e=this.uvs.length;u=this.parseUVIndex(r,e),h=this.parseUVIndex(o,e),f=this.parseUVIndex(i,e),this.addUV(u,h,f),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const r=this.parseVertexIndex(e[n],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let o=0,i=e.length;o<i;o++)this.addVertexLine(this.parseVertexIndex(e[o],n));for(let o=0,i=t.length;o<i;o++)this.addUVLine(this.parseUVIndex(t[o],r))}};return e.startObject("",!1),e}class d extends r.Loader{constructor(e){super(e),this.materials=null}load(e,t,n,o){const i=this,a=new r.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){try{t(i.parse(n))}catch(r){o?o(r):console.error(r),i.manager.itemError(e)}}),n,o)}setMaterials(e){return this.materials=e,this}parse(e){const t=new p;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let l="",c="",u=0,h=[];const f="function"===typeof"".trimLeft;for(let r=0,p=n.length;r<p;r++)if(l=n[r],l=f?l.trimLeft():l.trim(),u=l.length,0!==u&&(c=l.charAt(0),"#"!==c))if("v"===c){const e=l.split(/\s+/);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?t.colors.push(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6])):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===c){const e=l.substr(1).trim().split(/\s+/),n=[];for(let t=0,o=e.length;t<o;t++){const r=e[t];if(r.length>0){const e=r.split("/");n.push(e)}}const r=n[0];for(let o=1,i=n.length-1;o<i;o++){const e=n[o],i=n[o+1];t.addFace(r[0],e[0],i[0],r[1],e[1],i[1],r[2],e[2],i[2])}}else if("l"===c){const e=l.substring(1).trim().split(" ");let n=[];const r=[];if(-1===l.indexOf("/"))n=e;else for(let t=0,o=e.length;t<o;t++){const o=e[t].split("/");""!==o[0]&&n.push(o[0]),""!==o[1]&&r.push(o[1])}t.addLineGeometry(n,r)}else if("p"===c){const e=l.substr(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(h=o.exec(l))){const e=(" "+h[0].substr(1).trim()).substr(1);t.startObject(e)}else if(a.test(l))t.object.startMaterial(l.substring(7).trim(),t.materialLibraries);else if(i.test(l))t.materialLibraries.push(l.substring(7).trim());else if(s.test(l))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===c){if(h=l.split(" "),h.length>1){const e=h[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===l)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+l+'"')}t.finalize();const d=new r.Group;d.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let o=0,i=t.objects.length;o<i;o++){const e=t.objects[o],n=e.geometry,i=e.materials,a="Line"===n.type,s="Points"===n.type;let l=!1;if(0===n.vertices.length)continue;const c=new r.BufferGeometry;c.setAttribute("position",new r.Float32BufferAttribute(n.vertices,3)),n.normals.length>0&&c.setAttribute("normal",new r.Float32BufferAttribute(n.normals,3)),n.colors.length>0&&(l=!0,c.setAttribute("color",new r.Float32BufferAttribute(n.colors,3))),!0===n.hasUVIndices&&c.setAttribute("uv",new r.Float32BufferAttribute(n.uvs,2));const u=[];for(let o=0,f=i.length;o<f;o++){const e=i[o],n=e.name+"_"+e.smooth+"_"+l;let c=t.materials[n];if(null!==this.materials)if(c=this.materials.create(e.name),!a||!c||c instanceof r.LineBasicMaterial){if(s&&c&&!(c instanceof r.PointsMaterial)){const e=new r.PointsMaterial({size:10,sizeAttenuation:!1});r.Material.prototype.copy.call(e,c),e.color.copy(c.color),e.map=c.map,c=e}}else{const e=new r.LineBasicMaterial;r.Material.prototype.copy.call(e,c),e.color.copy(c.color),c=e}void 0===c&&(c=a?new r.LineBasicMaterial:s?new r.PointsMaterial({size:1,sizeAttenuation:!1}):new r.MeshPhongMaterial,c.name=e.name,c.flatShading=!e.smooth,c.vertexColors=l,t.materials[n]=c),u.push(c)}let h;if(u.length>1){for(let e=0,t=i.length;e<t;e++){const t=i[e];c.addGroup(t.groupStart,t.groupCount,e)}h=a?new r.LineSegments(c,u):s?new r.Points(c,u):new r.Mesh(c,u)}else h=a?new r.LineSegments(c,u[0]):s?new r.Points(c,u[0]):new r.Mesh(c,u[0]);h.name=e.name,d.add(h)}else if(t.vertices.length>0){const e=new r.PointsMaterial({size:1,sizeAttenuation:!1}),n=new r.BufferGeometry;n.setAttribute("position",new r.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(n.setAttribute("color",new r.Float32BufferAttribute(t.colors,3)),e.vertexColors=!0);const o=new r.Points(n,e);d.add(o)}return d}}}}]);